<!-- 
// ////////////////////////////////////////////////////
// Author: Sunil Nanda
// ////////////////////////////////////////////////////
-->

<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Respimatic 100</title>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="viewport" content="width = device-width, initial-scale = 0.9, user-scalable = yes" />
  <link rel="icon" type="image/png" href="../common/img/favicon.png">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Cousine&family=Fira+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.css" />
  <link rel="stylesheet" href="../common/css/colors.css" />
  <link rel="stylesheet" href="../common/css/common.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.js">
  </script>
  <script src="../canvasjs/canvasjs.min.js"></script>
  <script src="../common/js/download.js"></script>
  <script src="../common/js/db.schema.js"></script>
  <script src="../common/js/common.js"></script>
  <script src="../common/js/charts.common.js"></script>
  <script src="../common/js/stats.table.js"></script>
  <script src="../common/js/global.data.js"></script>
  <script src="../common/js/error.warning.js"></script>
  <script src="js/import.export.js"></script>
  <script src="js/charts.graphs.js"></script>
  <script src="js/raw.data.js"></script>
  <script src="js/respimatic.analyzer.js"></script>
</head>

<body>
  <div class="sidebarColumn">
    <div class="sidebar">

      <br>
      <div class=shadowDiv5 style="border-radius:25px; background-color:var(--rsp_darkblue); color:white; font-size:20px; font-family:verdana;">
        <center>
          <p id="logTimeDuration">Session Duration 00:00:00
          <p id="selectedTimeDuration">Window Duration 00:00:00
        </center>
      </div>
      <br>

      <center>
        <div class=shadowDiv5 style="border-radius:25px; background-color:var(--rsp_darkblue); color:white; font-size:20px; font-family:verdana;">
          <p>Session Actions
            <br>
            <button id="btnSelect" class="sidebarButton" onclick='selectSession()'>Select Session</button>
            <br>
            <button id="btnExport" class="sidebarButton" onclick='selectExport()'>Export Session</button>
            <br>
            <button id="btnImport" class="sidebarButton" onclick='selectImport()'>Import Session</button>
            <br>
            <button id="btnDeleteAll" class="sidebarButton" onclick='deleteAllDbs()'>Delete All Sessions</button>
            <br>
            <button id="btnRaw" class="sidebarButton" onclick='selectRawData()'>Display Raw
              Data</button>
            <br>
        </div>
      </center>

      <br>
      <center>
        <div class=shadowDiv5 style="border-radius:25px; background-color:var(--rsp_darkblue); color:white; font-size:20px; font-family:verdana;">
          <p>Window Actions
            <br>
            <button id="btnStat" class="sidebarButton" onclick='selectStats()'>View Statistics</button>
            <br>
            <button id="btnChart" class="sidebarButton" onclick='selectCharts()'>View Charts</button>
            <br>
            <button id="btnErrorWarning" class="sidebarButton" onclick='selectErrorWarnings()'>View Alerts</button>
            <br>
            <button id="btnExportWindow" class="sidebarButton" onclick='selectExportWindow()'>Export Window </button>
            <br>
        </div>
      </center>

      <br>
      <div class=shadowDiv5 style="border-radius:25px; background-color:var(--rsp_darkblue); color:white; font-family:verdana;font-size:25px;">
        <center>
          <p id='SysUid' style="font-size:15px;">
          <p id='SessionInfo' style="font-size:20px;">
        </center>
      </div>
    </div>
  </div>

  <div class="body-pane" style="margin-right:20px;">

    <center>
      <div class=shadowDiv5 id="analysisWindowDiv" style="margin-top:20px; background-color:var(--rsp_darkblue); font-size:20px; font-family:verdana; display: none; ">
        <br><br>
        <div id="analysisRangeSliderDiv" style="padding-left:20px; padding-right:20px;">
        </div>
        <p style="color:white; font-size:20px; font-family:verdana;">
          Analysis Window Sliders&nbsp;&nbsp;
          <button id="btnSetInterval" class="sidebarButton" style="width:100px" onclick='setTimeInterval()'>Accept</button>
          <button id="btnCancelInterval" class="sidebarButton" style="width:100px" onclick='cancelTimeInterval()'>Cancel</button>
          <button id="btnResetInterval" class="sidebarButton" style="width:100px" onclick='resetTimeInterval()'>Reset</button>
          &nbsp;&nbsp;Start:<output id="intervalStart" name="Start" style="border-style: inset; border-color: white; border-radius: 10px; padding:5px; font-size:18px;"></output>
          &nbsp;&nbsp;End:<output id="intervalEnd" name="End" style="border-style: inset; border-color: white; border-radius: 10px; padding:5px; font-size:18px;"></output>
          &nbsp;&nbsp;Duration:<output id="intervalDuration" name="Duration" style="border-style: inset; border-color: white; border-radius: 10px; padding:5px; font-size:18px;"></output>
          <hr>
      </div>
    </center>

    <center>
      <div id="selectorDiv" style="width:800px; border-radius:25px; display: none; margin-bottom:20px;">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Select Session for Analysis</h2>
        <div class=shadowDiv5 style="border-radius:25px; height:690px; line-height:1em; overflow-y:auto; overflow-x:auto; white-space: nowrap; padding:5px; background-color:var(--rsp_mediumblue); color:white; border:4px var(--rsp_lightblue); font-family: 'Cousine';max-width: 1000px;">
          <br>
          <table id='dbTable' className="dbTableStyle" style="font-size:20px; width:100%">
          </table>
        </div>

      </div>
    </center>

    <div id="statsDiv" style="display: none; border-radius:25px; margin-bottom:20px;">
      <center>
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Session Statistics</h2>
      </center>
      <div class="row">

        <div id="measured-pane" class="column" style="font-size: 20">
          <center>
            <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
              Parameters Measured</h2>
          </center>
          <table id='statsMinMaxTable' className="statsTableStyle" style="font-size:18px; width:100%">
            <tr>
              <th align="left" style="background-color:lightgray; ">
                Parameter</th>
              <th align="left" style="background-color:lightgray; ">Units
              </th>
              <th align="left" style="background-color:lightgray;">Min</th>
              <th align="left" style="background-color:lightgray;">&nbspMax</th>
              <th align="left" style="background-color:lightgray;">&nbsp&nbsp&nbsp&nbspAvg</th>
            </tr>
          </table>

          <center>
            <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
              Miscellaneous Information</h2>
          </center>
          <table id='statsMiscTable' className="statsTableStyle" style="font-size:18px; width:100%">
            <tr>
              <th align="left" style="background-color:lightgray; ">
                Information</th>
              <th align="left" style="background-color:lightgray; ">Value
              </th>
            </tr>
          </table>
        </div>

        <div id="stats-pane" class="column" style="font-size: 20">
          <center>
            <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
              Static Information</h2>
          </center>
          <p id="pName">
          <p id="pInfo">
            <br>
          <p id="altitude">
            <center>
              <div id="staticStats" style="font-size: 20px">
                <center>
                  <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
                    Parameter Settings Used</h2>
                </center>

                <center>
                  <table id='statsParamTable' className="statsTableStyle" style="font-size:18px; width:100%">
                    <tr>
                      <th align="left" style="background-color:lightgray; ">
                        Parameter</th>
                      <th align="left" style="background-color:lightgray; ">
                        Units
                      </th>
                      <th align="left" style="background-color:lightgray;">
                        Values</th>
                    </tr>
                  </table>
                </center>

                <center>
                  <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
                    Sequence of Parameter Combinations</h2>
                </center>

                <center>
                  <table id='statsComboTable' className="statsTableStyle" style="text-align:center; font-size:17px; width:100%">
                    <tr>
                      <th style="background-color:lightgray;">
                        MODE</th>
                      <th style="background-color:lightgray;">
                        VT </th>
                      <th style="background-color:lightgray;">
                        &nbsp;RR&nbsp;</th>
                      <th style="background-color:lightgray;">
                        I:E</th>
                      <th style="background-color:lightgray;">
                        PEEP</th>
                      <th style="background-color:lightgray;">
                        PMAX</th>
                      <th style="background-color:lightgray;">
                        &nbsp;&nbsp;PS&nbsp;&nbsp;</th>
                      <th style="background-color:lightgray;">
                        TPS</th>
                      <th style="background-color:lightgray;">
                        FIO2</th>
                      <th style="background-color:lightgray;">
                        BREATHS</th>
                      <th style="background-color:lightgray;">
                        START TIME</th>
                    </tr>
                  </table>
                </center>

              </div>

            </center>
        </div>
      </div>
    </div>

    <center>
      <div id="chartsDiv" style="border-radius:25px; display: none; margin-bottom:20px;">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Select Parameters for Chart</h2>

        <div class=shadowDiv5 style="width:2000px;background-color:var(--rsp_mediumblue); color:white;font-size:20px; font-family:verdana; ">
          <br>
          <input id="peakTick" style="width:20px;height:20px;" type="checkbox">
          Peak
          <input id="platTick" style="width:20px;height:20px;" type="checkbox">
          Plateau
          <input id="peepTick" style="width:20px;height:20px;" type="checkbox">
          PEEP
          <input id="vtdelTick" style="width:20px;height:20px;" type="checkbox">
          Tidal Volume
          <input id="mvdelTick" style="width:20px;height:20px;" type="checkbox">
          Minute Volume
          <input id="mbpmTick" style="width:20px;height:20px;" type="checkbox">
          Mandatory BPM
          <input id="sbpmTick" style="width:20px;height:20px;" type="checkbox">
          Spontaneous BPM
          <br>
          <input id="fiO2Tick" style="width:20px;height:20px;" type="checkbox">
          FiO<sub>2</sub>
          <input id="o2PurityTick" style="width:20px;height:20px;" type="checkbox">
          O<sub>2</sub> Purity
          <input id="o2FlowTick" style="width:20px;height:20px;" type="checkbox">
          O<sub>2</sub> Flow
          <input id="scompTick" style="width:20px;height:20px;" type="checkbox">
          Instant Static Compliance
          <input id="dcompTick" style="width:20px;height:20px;" type="checkbox">
          Instant Dynamic Compliance
          <br>
          <input id="warningTick" style="width:20px;height:20px;" type="checkbox">
          Warning
          <input id="errorTick" style="width:20px;height:20px;" type="checkbox">
          Error
          <input id="tempTick" style="width:20px;height:20px;" type="checkbox">
          System Temperature

          <br><br>
          X-Axis:
          <input id="breathTick" type="radio" name="xaxis" checked style="font-size: 16px;width: 20px; height: 20px">
          <label for="breathNum">Breath Number</label>
          <input id="timeTick" type="radio" name="xaxis" style="font-size: 16px;width: 20px; height: 20px">
          <label for="timeBased">Elapsed Time between Updates</label>

          <br><br>
          <input id="chartTitle" type="text" style="border-radius:25px; font-size: 16px;padding: 5px;width: 150;text-align: center">
          Chart Title
          <button class="button" style="background-color:var(--rsp_darkblue);" onclick='createNewChart()'>CREATE
            CHART</button>
          <br><br>
        </div>

        <div class=shadowDiv5 style="background-color:var(--rsp_lightblue);min-height: 650px;">
          <div id="chartContainerDiv" height=550px style="border-radius:25px; margin-top:20px">
          </div>
        </div>
      </div>
    </center>

    <center>
      <div id="errorWarningDiv" style="border-radius:25px; display: none; margin-bottom:20px;">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Session Alerts</h2>

        <div class="row">
          <div id="errorColDiv" class="column" style="border-radius:25px; font-size: 20">
            <center>
              <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
                Session Errors</h2>
            </center>
            <div class=shadowDiv5 id="errorDiv" style="border-radius:25px; margin-left:10px; height:760px; overflow-y:auto; overflow-x:auto; white-space: nowrap; padding:5px; background-color:var(--rsp_mediumblue); color:white; border:10px var(--rsp_lightblue); font-family: 'Cousine'">
              <p id="scrollErrorDiv" style="font-size:16; text-align: left">
            </div>
          </div>

          <div id="warningColDiv" class="column" style="border-radius:25px; font-size: 20">
            <center>
              <h2 class=shadowDiv5 style="background-color:var(--rsp_mediumblue); color:white;font-size:1.5em; font-family:verdana;">
                Session Warnings</h2>
            </center>
            <div class=shadowDiv5 id="warningDiv" style="border-radius:25px; margin-left:10px; height:760px; overflow-y:auto; overflow-x:auto; white-space: nowrap; padding:5px; background-color:var(--rsp_mediumblue); color:white; border:10px var(--rsp_lightblue); font-family: 'Cousine'">
              <p id="scrollWarningDiv" style="font-size:16; text-align: left">
            </div>
          </div>

        </div>
      </div>
    </center>

    <center>
      <div id="rawDataDiv" style="width:1000px; border-radius:25px; display: none; margin-bottom:20px;">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Dumping Raw Data for Session</h2>
        <div class=shadowDiv5 style="margin-right:10px; height:1025px; line-height:1em; overflow-y:auto; overflow-x:auto; white-space: nowrap; padding:5px; background-color:var(--rsp_mediumblue); color:white; border:10px var(--rsp_lightblue); font-family: 'Cousine'">
          <p id="scrollRawDataDiv" style="font-size:16; text-align: left">
        </div>

      </div>
    </center>

    <center>
      <div id="importDiv" style="width:800px; border-radius:25px; margin-bottom:30px; display: none">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Import Session</h2>
        <div class=shadowDiv5 style="border-radius:25px; height:350px; background-color:var(--rsp_mediumblue); color:white; border:10px var(--rsp_lightblue); font-size: 25px; font-family: 'verdana'">
          <br><br>
          <label for="fileSelector">Session File to Import</label>
          <input type="file" id="fileSelector" accept=".txt" style="width: 200; border-radius: 10px; background-color:white; color:var(--rsp_darkblue); font-size:25px; font-family:verdana;" />
          <br><br>
          <label for="importSessionName">Session Name to Create</label>
          <input id="importSessionName" style="width: 200; border-radius: 10px; background-color:white; color:var(--rsp_darkblue); font-size:25px; font-family:verdana;" />
          <br><br><br>
          <button class="button" style="background-color:var(--rsp_darkblue);" onclick='importFile()'>IMPORT</button>
          <br>

        </div>
      </div>
    </center>

    <center>
      <div id="exportSessionDiv" style="width:800px; border-radius:25px; display: none; margin-bottom:20px;">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Export Selected Session</h2>
        <div class=shadowDiv5 style="border-radius:25px; height:690px; line-height:1em; overflow-y:auto; overflow-x:auto; white-space: nowrap; padding:5px; background-color:var(--rsp_mediumblue); color:white; border:4px var(--rsp_lightblue); font-family: 'Cousine';max-width: 1000px;">
          <br>
          <table id='dbExportTable' className="dbTableStyle" style="font-size:20px; width:100%">
          </table>
        </div>
      </div>
    </center>

    <center>
      <div id="exportWindowDiv" style="width:800px; border-radius:25px; display: none">
        <h2 style="color:var(--rsp_darkblue); font-size:1.5em; font-family:verdana;">
          Export Analysis Window</h2>
        <button class="button" onclick='exportWindow()' style="font-size:1.5em; -webkit-box-shadow: 10px 10px 10px 10px rgba(0,0,0,0.4); box-shadow: 10px 10px 10px 10px rgba(0,0,0,0.4); ">Export Analysis Window
          as a Session</button>
        <br><br><br><br>
      </div>
    </center>

    <div class=shadowDiv5 id="logosDiv" style="border-radius:25px; background-color:var(--rsp_darkblue);">
      <center>
        <img src="img/analyzer-title-logos.png" alt="Title" style="margin-top: 15px" width="620" height="140">
      </center>
    </div>
  </div>

</body>

</html>
